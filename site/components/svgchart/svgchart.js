/* svgchart v0.0.1 - 12/30/2013
   http://
   Copyright (c) 2013  - Licensed  */
(function(){var Base,Chart,ChartLine,Maths,Ruler,Tooltip,UI,Utils,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},__slice=[].slice;Maths={max:function(vals){return Math.max.apply(Math,vals)},min:function(vals){return Math.min.apply(Math,vals)},rangeToPercent:function(number,range_min,range_max,constrain_min,constrain_max){if(constrain_min==null){constrain_min=false}if(constrain_max==null){constrain_max=false}if(constrain_min&&number<range_min){return 0}else if(constrain_max&&number>range_max){return 1}else{return(number-range_min)/(range_max-range_min)}},percentToRange:function(percent,range_min,range_max){return(range_max-range_min)*percent+range_min},radiansToDegrees:function(radians){return radians*180/Math.PI},degreesToRadians:function(degrees){return degrees*Math.PI/180},sign:function(num){if(num<0){return-1}else{return 1}},constrain:function(num,min,max){if(min==null){min=0}if(max==null){max=1}if(num<min){min}if(num>max){max}return num},randomRange:function(min,max,round){var num;if(round==null){round=false}num=min+Math.random()*(max-min);if(round){return Math.round(num)}else{return num}},map:function(num,min1,max1,min2,max2,round){var num1,num2;if(round==null){round=false}num1=(num-min1)/(max1-min1);num2=num1*(max2-min2)+min2;if(round){return Math.round(num2)}else{return num2}}};Utils={mergeOptions:function(defaults,options){var key,merge,value;if(options==null){options={}}merge={};for(key in defaults){value=defaults[key];merge[key]=options[key]?options[key]:value}return merge}};Base=function(){function Base(container,options){this.container=container;if(options==null){options={}}this.data=[];this.ui_elements=[];this.margins={top:0,right:0,bottom:0,left:0};this._setWidthHeight();this._calcDrawableArea();this._createSVG();Tooltip.init(this.container,this.svg)}Base.prototype.setMargins=function(top,right,bottom,left){this.margins={top:top||this.margins.top,right:right||this.margins.right,bottom:bottom||this.margins.bottom,left:left||this.margins.left};return this._calcDrawableArea()};Base.prototype.setTitle=function(title){this.title=title;return this};Base.prototype.setDescription=function(description){this.description=description;return this};Base.prototype.setData=function(data){this.data=data;this._setMaxMin();return this.num_datasets=this.data.dataset?this.data.dataset.length:this.data.length};Base.prototype.clear=function(){var ui,_i,_len,_ref;_ref=this.ui_elements;for(_i=0,_len=_ref.length;_i<_len;_i++){ui=_ref[_i];ui.remove()}return this.ui_elements=[]};Base.prototype.draw=function(){return this._calcDrawableArea()};Base.prototype._calcDrawableArea=function(){this.drawable_width=this.width-this.margins.left-this.margins.right;return this.drawable_height=this.height-this.margins.top-this.margins.bottom};Base.prototype._appendUIElement=function(ui){this.ui_elements.push(ui);return this.svg.appendChild(ui.element)};Base.prototype._setMaxMin=function(){var dataset,vals,_i,_j,_len,_len1,_ref,_ref1;vals=[];if(this.data.dataset){_ref=this.data.dataset;for(_i=0,_len=_ref.length;_i<_len;_i++){dataset=_ref[_i];vals=vals.concat(dataset.values)}}else{_ref1=this.data;for(_j=0,_len1=_ref1.length;_j<_len1;_j++){dataset=_ref1[_j];vals=vals.concat(dataset.value)}}this.max=Maths.max(vals);return this.min=Maths.min(vals)};Base.prototype._setWidthHeight=function(){this.real_width=this.container.offsetWidth;this.real_height=this.container.offsetHeight;this.width=this.container.offsetWidth;return this.height=this.container.offsetHeight};Base.prototype._validData=function(){return true};Base.prototype._createSVG=function(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.setAttribute("width","100%");this.svg.setAttribute("height","100%");return this.container.appendChild(this.svg)};return Base}();Base.Angular=function(_super){var NUM_COLORS,_tooltipHTML;__extends(Angular,_super);NUM_COLORS=5;function Angular(){Angular.__super__.constructor.apply(this,arguments);this.width=100;this.height=100}Angular.prototype.draw=function(){this._calcDrawableArea();this._setMaxMin();this._setTotal();return this.drawItems()};Angular.prototype._calcDrawableArea=function(){this.real_margins={top:this.real_width*this.margins.top/100,right:this.real_width*this.margins.right/100,bottom:this.real_width*this.margins.bottom/100,left:this.real_width*this.margins.left/100};this.drawable_width=this.real_width-this.real_margins.left-this.real_margins.right;this.drawable_height=this.real_height-this.real_margins.top-this.real_margins.bottom;this.centerX=this.drawable_width/2+this.real_margins.left;this.centerY=this.drawable_height/2+this.real_margins.top;return this.radius=Maths.min([this.drawable_width,this.drawable_height])/2};Angular.prototype._setTotal=function(){var dataset,_i,_len,_ref,_results;this.total=0;_ref=this.data;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){dataset=_ref[_i];_results.push(this.total+=parseFloat(dataset.value))}return _results};Angular.prototype.polarToCartesian=function(angle,radius){if(radius==null){radius=null}radius=radius||this.radius;angle-=Math.PI/2;return{x:this.centerX+radius*Math.cos(angle),y:this.centerY+radius*Math.sin(angle)}};Angular.prototype.describeArc=function(startAngle,endAngle,factor){var arcSweep,end,radius,start;if(factor==null){factor=1}radius=this.radius*factor;start=this.polarToCartesian(endAngle,radius);end=this.polarToCartesian(startAngle,radius);arcSweep=endAngle-startAngle<=Math.PI?"0":"1";return"M "+start.x+" "+start.y+"\nA "+radius+" "+radius+" 0 "+arcSweep+" 0 "+end.x+", "+end.y+"\nL "+this.centerX+" "+this.centerY};Angular.prototype.drawItems=function(){var angle,color_index,data,endAngle,factor,index,label,startAngle,value,_i,_len,_ref,_results;startAngle=0;_ref=this.data;_results=[];for(index=_i=0,_len=_ref.length;_i<_len;index=++_i){data=_ref[index];label=data.name;value=data.value;factor=parseFloat(value/this.total);angle=2*Math.PI*factor;endAngle=startAngle+angle;color_index=index%NUM_COLORS;this._drawItemArc(startAngle,endAngle,color_index,data);this._drawItemLabel(startAngle+angle*.5,""+label+" ("+value+")",factor,color_index);_results.push(startAngle+=angle)}return _results};Angular.prototype._drawItemArc=function(startAngle,endAngle,index,data,factor){var uiel;uiel=new UI.Element("path",{"class":"index_"+index,d:this.describeArc(startAngle,endAngle,factor)});this.attachItemEvents(uiel,data,index);return this._appendUIElement(uiel)};Angular.prototype._drawItemLabel=function(angle,value,factor,color){var labelParams,labelPos,uiel;labelPos=this.polarToCartesian(angle,this.radius-10);labelParams={x:labelPos.x-2,y:labelPos.y,dy:10*Math.cos(angle),"text-anchor":angle>Math.PI?"start":"end"};uiel=new UI.Element("text",labelParams);uiel.element.textContent=Math.round(factor*100)+"%";return this._appendUIElement(uiel)};Angular.prototype.attachItemEvents=function(bar,barData,index){var _this=this;bar.bind("mouseover,touchstart",function(){Tooltip.hide();Tooltip.html(_tooltipHTML(barData,index));Tooltip.show();clearTimeout(_this.tooltip_timeout);return _this.tooltip_timeout=setTimeout(Tooltip.hide,2e3)});return bar.bind("mouseleave",function(e){clearTimeout(_this.tooltip_timeout);return Tooltip.hide()})};_tooltipHTML=function(data,index){return""+data.name+"\n<h1>"+data.value+"</h1>"};return Angular}(Base);Base.Linear=function(_super){var _tooltipHTML;__extends(Linear,_super);function Linear(){Linear.__super__.constructor.apply(this,arguments);this.bars_padding=2;this.ruler=new Ruler;this.width=100;this.height=100;this.units="%"}Linear.prototype.draw=function(){Linear.__super__.draw.apply(this,arguments);this._setItemAnchorSize();this.drawDrawableContainer();this.drawRuler();return this.drawItems()};Linear.prototype.drawItems=function(){var index,label,_i,_len,_ref,_results;_ref=this.data.labels;_results=[];for(index=_i=0,_len=_ref.length;_i<_len;index=++_i){label=_ref[index];_results.push(this.drawItem(label,index))}return _results};Linear.prototype.drawDrawableContainer=function(){var uiel;uiel=new UI.Element.Bar("rect",{"class":"ruler",x:""+this.margins.left+this.units,y:""+this.margins.top+this.units,width:""+this.drawable_width+this.units,height:""+this.drawable_height+this.units});return this._appendUIElement(uiel)};Linear.prototype.drawItem=function(label,index){var attributes,dataset,factor_h,factor_w,factor_x,factor_y,subindex,_i,_len,_ref;_ref=this.data.dataset;for(subindex=_i=0,_len=_ref.length;_i<_len;subindex=++_i){dataset=_ref[subindex];factor_h=this.calcItemH(dataset.values[index]);factor_y=this.calcItemY(index,dataset.values[index],factor_h,subindex);factor_w=this.calcItemW(dataset.values[index]);factor_x=this.calcItemX(index,dataset.values[index],factor_w,subindex);attributes={x:this.drawable_width*factor_x+this.margins.left,y:this.drawable_height*factor_y+this.margins.top,width:this.drawable_width*factor_w,height:this.drawable_height*factor_h};this._drawBar(label,dataset,attributes,index,subindex)}return this._drawBarLabel(label,attributes,index)};Linear.prototype._drawBar=function(label,dataset,attributes,index,subindex){var ui_bar;ui_bar=new UI.Element.Bar("rect",{x:""+attributes.x+this.units,y:""+attributes.y+this.units,width:""+attributes.width+this.units,height:""+attributes.height+this.units,"class":"item index_"+subindex});this.attachItemEvents(label,ui_bar,dataset,index);this._appendUIElement(ui_bar);if(this._appendAnimation){return this._appendAnimation(ui_bar)}};Linear.prototype._drawBarLabel=function(label,attributes,index){var labelAttributes,ui_label;labelAttributes={"pointer-events":"none"};if(this.ruler.axis==="y"){labelAttributes={x:""+(this.item_anchor_size*index+this.item_anchor_size/2+this.margins.left)+this.units,y:""+(this.height-this.margins.bottom*.5)+this.units,"text-anchor":"middle"}}else{labelAttributes={x:""+this.margins.left+this.units,y:""+(this.item_anchor_size*index+this.item_anchor_size*.5+this.margins.top)+this.units,dx:"-1"+this.units,dy:"1"+this.units,"text-anchor":"end"}}ui_label=new UI.Element("text",labelAttributes);ui_label.element.textContent=label;return this._appendUIElement(ui_label)};Linear.prototype.drawRuler=function(){var coords,i,labelData,zero_coords,_i,_j,_len,_len1,_ref,_ref1,_results;this.ruler.setLimits(this.min,this.max);this.ruler.setLinearCoords(this.drawable_height,this.drawable_width,this.margins);this.drawRuleLine(this.ruler.coords.zero,true);_ref=this.ruler.coords.lines;for(_i=0,_len=_ref.length;_i<_len;_i++){coords=_ref[_i];this.drawRuleLine(coords)}zero_coords={x:this.ruler.coords.zero.x1,y:this.height-this.margins.bottom,label:"0"};this.drawRulerLabel(zero_coords,true);_ref1=this.ruler.coords.labels;_results=[];for(i=_j=0,_len1=_ref1.length;_j<_len1;i=++_j){labelData=_ref1[i];_results.push(this.drawRulerLabel(labelData))}return _results};Linear.prototype.drawRuleLine=function(coords,isZero){var line,zeroClass;if(isZero==null){isZero=false}if(isZero){console.log("Pinto zero",coords)}zeroClass=isZero?" zero":"";line=new UI.Element("line",{x1:""+coords.x1+this.units,x2:""+coords.x2+this.units,y1:""+coords.y1+this.units,y2:""+coords.y2+this.units,"class":"ruler"+zeroClass});return this._appendUIElement(line)};Linear.prototype.drawRulerLabel=function(attributes,isZero){var labelDef,uiel;if(isZero==null){isZero=false}labelDef={x:""+attributes.x+this.units,y:""+attributes.y+this.units,"class":isZero?"zero":""};if(this.ruler.axis==="y"){labelDef.dx="-1"+this.units;labelDef.dy="1"+this.units;labelDef["text-anchor"]="end"}else{labelDef.dy="2"+this.units;labelDef["text-anchor"]="middle"}uiel=new UI.Element("text",labelDef);uiel.element.textContent=parseFloat(attributes.label).toFixed(2);return this._appendUIElement(uiel)};Linear.prototype.attachItemEvents=function(label,bar,dataset,subindex){var _this=this;bar.bind("mouseover,touchstart",function(){Tooltip.hide();Tooltip.html(_tooltipHTML(dataset,subindex));Tooltip.show();clearTimeout(_this.tooltip_timeout);return _this.tooltip_timeout=setTimeout(Tooltip.hide,2e3)});return bar.bind("mouseleave",function(e){clearTimeout(_this.tooltip_timeout);return Tooltip.hide()})};Linear.prototype._setItemAnchorSize=function(){return this};_tooltipHTML=function(data,index){return""+data.name+"\n<h1>"+data.values[index]+"</h1>"};return Linear}(Base);Ruler=function(){var DEFAULT_NUM_DIVISORS,_getDefaultMargins;DEFAULT_NUM_DIVISORS=6;function Ruler(options){this.options=options!=null?options:{};this.num_divisors=this.options.num_divisors||DEFAULT_NUM_DIVISORS;this.divisors=[];this.axis="y";this.min=null;this.max=null;this.zero_pos=null}Ruler.prototype.setNumDivisors=function(num_divisors){this.num_divisors=num_divisors;return this};Ruler.prototype.setLimits=function(min,max){this.min=Maths.min([min,max,0]);this.max=Maths.max([min,max,0]);this._calcZero();return this._calcDivisors()};Ruler.prototype.setLinearCoords=function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];this.coords={};return this["_setLine"+this.axis.toUpperCase()+"Coords"].apply(this,args)};Ruler.prototype._setLineYCoords=function(height,width,margin){var delta,value,x1,x2,y,zeroY,_i,_len,_ref;if(margin==null){margin=null}margin=margin||_getDefaultMargins();delta=height/(this.divisors.length-1);y=margin.top;x1=margin.left;x2=width+margin.left;this.coords.lines=[];this.coords.labels=[];_ref=this.divisors.reverse();for(_i=0,_len=_ref.length;_i<_len;_i++){value=_ref[_i];this.coords.lines.push({x1:x1,x2:x2,y1:y,y2:y});this.coords.labels.push({x:margin.left,y:y,label:value});y+=delta}zeroY=(1-this.zero)*height+margin.top;return this.coords.zero={x1:x1,x2:x2,y1:zeroY,y2:zeroY}};Ruler.prototype._setLineXCoords=function(height,width,margin){var delta,value,x,y1,y2,zeroX,_i,_len,_ref;if(margin==null){margin=null}margin=margin||_getDefaultMargins();delta=width/(this.divisors.length-1);x=margin.left;y1=margin.top;y2=height+margin.top;this.coords.lines=[];this.coords.labels=[];_ref=this.divisors;for(_i=0,_len=_ref.length;_i<_len;_i++){value=_ref[_i];this.coords.lines.push({x1:x,x2:x,y1:y1,y2:y2});this.coords.labels.push({x:x,y:y2,label:value});x+=delta}zeroX=this.zero*width+margin.left;return this.coords.zero={y1:y1,y2:y2,x1:zeroX,x2:zeroX}};Ruler.prototype._calcDivisors=function(){var delta,i,_i,_ref,_results;this.divisors=[];delta=(this.max-this.min)/(this.num_divisors-1);_results=[];for(i=_i=0,_ref=this.num_divisors-1;0<=_ref?_i<=_ref:_i>=_ref;i=0<=_ref?++_i:--_i){_results.push(this.divisors.push(parseFloat(this.min+delta*i)))}return _results};Ruler.prototype._calcZero=function(){if(this.min>=0){return this.zero=0}else if(this.max<=0){return this.zero=1}else{return this.zero=Maths.rangeToPercent(0,this.min,this.max)}};_getDefaultMargins=function(){return{top:0,right:0,bottom:0,left:0}};return Ruler}();Tooltip=function(){var hide,html,init,show,text,_container,_el,_onMove,_svg,_svgPoint;_container=null;_el=null;_svg=null;_svgPoint=null;init=function(container,svg){_container=container;_svg=svg;_el=document.createElement("div");_el.setAttribute("data-svgchart-tooltip","true");_container.appendChild(_el);return _svgPoint=_svg.createSVGPoint()};text=function(text){return _el.innerText=text};html=function(html){return _el.innerHTML=html};show=function(){_el.classList.add("show");_container.addEventListener("mousemove",_onMove);return _onMove()};hide=function(){_el.classList.remove("show");return _container.removeEventListener("mousemove",_onMove)};_onMove=function(){_el.style.top=""+(event.pageY-20)+"px";return _el.style.left=""+(event.pageX+20)+"px"};return{init:init,text:text,html:html,show:show,hide:hide}}();UI={};UI.Element=function(){function Element(type,attributes){var attr;this.type=type;this.attributes=attributes;this.element=document.createElementNS("http://www.w3.org/2000/svg",this.type);for(attr in this.attributes){this.attr(attr,attributes[attr])}}Element.prototype.attr=function(attribute,value){if(value){return this.element.setAttribute(attribute,value)}else{return this.element.getAttribute(attribute)}};Element.prototype.append=function(uiel){return this.element.appendChild(uiel.element)};Element.prototype.addClass=function(className){var current;current=this.attr("class");if(!current){return this.attr("class",className)}else if(current.split(" ").indexOf(className)===-1){return this.attr("class",""+current+" "+className)}};Element.prototype.removeClass=function(className){var classes,current,new_classes;current=this.attr("class");if(current){classes=current.split(" ");new_classes=classes.filter(function(cls){return cls!==className});return this.attr("class",new_classes.join(" "))}};Element.prototype.remove=function(){if(this.element.parentNode){return this.element.parentNode.removeChild(this.element)}};Element.prototype.bind=function(eventName,callback){var ev,_i,_len,_ref,_results;_ref=eventName.split(",");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){ev=_ref[_i];_results.push(this.element.addEventListener(ev,callback,true))}return _results};return Element}();UI.Element.Bar=function(_super){__extends(Bar,_super);function Bar(){_ref=Bar.__super__.constructor.apply(this,arguments);return _ref}return Bar}(UI.Element);this.Chart=Chart={};Chart.Column=function(_super){var ANIMATION_DURATION;__extends(Column,_super);ANIMATION_DURATION="0.6s";function Column(){Column.__super__.constructor.apply(this,arguments);this.bars_padding=1;this.svg.setAttribute("data-svgchart-type","bar");this.ruler.axis="y";this.setMargins(10,10,10,10)}Column.prototype._setItemAnchorSize=function(){return this.item_anchor_size=this.drawable_width/this.data.labels.length};Column.prototype.calcItemW=function(value){var n_datasets,w;n_datasets=this.data.dataset.length;w=(this.item_anchor_size-this.bars_padding)/n_datasets/this.drawable_width;if(w===0){return.01}else{return w}};Column.prototype.calcItemH=function(value){var h;h=this.ruler.zero-Maths.rangeToPercent(value,this.ruler.min,this.ruler.max);if(h===0){return.01}else{return Math.abs(h)}};Column.prototype.calcItemX=function(index,value,width,index2){var deltaX;deltaX=(this.item_anchor_size-this.bars_padding)/this.data.dataset.length*index2;return(this.item_anchor_size*index+deltaX+this.bars_padding*.5)/this.drawable_width};Column.prototype.calcItemY=function(index,value,height,index2){var v;v=value<0?this.ruler.zero:this.ruler.zero+height;return 1-v};Column.prototype._appendAnimation=function(el){el.append(new UI.Element("animate",{attributeType:"XML",attributeName:"height",begin:"0s",dur:ANIMATION_DURATION,fill:"freeze",from:"0",to:el.attr("height")}));if(parseFloat(el.attr("y"))<this.ruler.coords.zero.y1){return el.append(new UI.Element("animate",{attributeType:"XML",attributeName:"y",begin:"0s",dur:ANIMATION_DURATION,fill:"freeze",from:""+this.ruler.coords.zero.y1+"%",to:el.attr("y")}))}};return Column}(Base.Linear);ChartLine=function(_super){__extends(ChartLine,_super);function ChartLine(){ChartLine.__super__.constructor.apply(this,arguments);this.points=[];this.bars_padding=0;this.fill_item=true;this.tension=.5;this.ruler.axis="y";this.setMargins(10,10,10,10)}ChartLine.prototype.setTension=function(tension){if(tension>=0&&tension<=1){this.tension=tension;return true}console.error("Tension value must be >= 0 and <= 1");return false};ChartLine.prototype.drawItems=function(){var dataset,drawn_points,index,points,subindex,value,_i,_j,_len,_len1,_ref1,_ref2,_results;_ref1=this.data.dataset;_results=[];for(index=_i=0,_len=_ref1.length;_i<_len;index=++_i){dataset=_ref1[index];points=[];_ref2=dataset.values;for(subindex=_j=0,_len1=_ref2.length;_j<_len1;subindex=++_j){value=_ref2[subindex];drawn_points=this._drawItem(dataset,value,index,subindex);points.push(drawn_points);if(index===0){this._drawItemLabel(subindex,drawn_points)}}_results.push(this._drawPath(points,index))}return _results};ChartLine.prototype._drawItem=function(dataset,value,index,subindex){var attributes,cx,cy,el,factor_y,zero_y;zero_y=((1-this.ruler.zero)*this.drawable_height+this.margins.top)*this.real_height/100;factor_y=1-Maths.rangeToPercent(value,this.ruler.min,this.ruler.max);cy=this.margins.top+this.drawable_height*factor_y;cx=this.item_anchor_size*subindex+this.margins.left;attributes={r:6,cx:""+cx+this.units,cy:""+cy+this.units,"class":"item index_"+index};el=new UI.Element("circle",attributes);this._appendUIElement(el);this.attachItemEvents(this.data.labels[index],el,dataset,subindex);return{x:cx*this.real_width/100,y:cy*this.real_height/100}};ChartLine.prototype._drawItemLabel=function(index,point){var label,labelEl;label=this.data.labels[index];labelEl=new UI.Element("text",{x:point.x,y:""+(this.height-this.margins.bottom/2)+this.units,"text-anchor":"middle"});labelEl.element.textContent=label;return this._appendUIElement(labelEl)};ChartLine.prototype._drawPath=function(points,index){var end_zero_x,i,num_points,path,pathDef,start_zero_x,xdiff,zero_y,_i,_ref1;start_zero_x=this.margins.left*this.real_width/100;zero_y=((1-this.ruler.zero)*this.drawable_height+this.margins.top)*this.real_height/100;end_zero_x=(this.margins.left+this.drawable_width)*this.real_width/100;pathDef=[];if(this.fill_item){pathDef.push("M "+start_zero_x+" "+zero_y);pathDef.push("L "+points[0].x+","+points[0].y)}else{pathDef.push("M "+points[0].x+","+points[0].y)}num_points=points.length;for(i=_i=0,_ref1=num_points-2;0<=_ref1?_i<=_ref1:_i>=_ref1;i=0<=_ref1?++_i:--_i){xdiff=(points[i+1].x-points[i].x)*this.tension;pathDef.push("C");pathDef.push(""+(points[i].x+xdiff)+","+points[i].y);pathDef.push(""+(points[i+1].x-xdiff)+","+points[i+1].y);pathDef.push(""+points[i+1].x+","+points[i+1].y)}if(this.fill_item){pathDef.push("L "+end_zero_x+","+zero_y)}path=new UI.Element("path",{"pointer-events":"none",d:pathDef.join(" ")});path.addClass("index_"+index);return this._appendUIElement(path)};ChartLine.prototype._setItemAnchorSize=function(){return this.item_anchor_size=this.drawable_width/(this.data.labels.length-1)};return ChartLine}(Base.Linear);Chart.Line=function(_super){__extends(Line,_super);function Line(){Line.__super__.constructor.apply(this,arguments);this.fill_item=false;this.svg.setAttribute("data-svgchart-type","line");this.tension=0}return Line}(ChartLine);Chart.Area=function(_super){__extends(Area,_super);function Area(){Area.__super__.constructor.apply(this,arguments);this.svg.setAttribute("data-svgchart-type","area")}return Area}(ChartLine);Chart.Point=function(_super){__extends(Point,_super);function Point(){Point.__super__.constructor.apply(this,arguments);this.svg.setAttribute("data-svgchart-type","point")}Point.prototype._drawPath=function(){return this};return Point}(ChartLine);Chart.Pie=function(_super){__extends(Pie,_super);function Pie(){Pie.__super__.constructor.apply(this,arguments);this.svg.setAttribute("data-svgchart-type","pie");this.margins={top:5,right:5,bottom:5,left:5};this.width=100;this.height=100}return Pie}(Base.Angular);Chart.Row=function(_super){var ANIMATION_DURATION;__extends(Row,_super);ANIMATION_DURATION="0.6s";function Row(){Row.__super__.constructor.apply(this,arguments);this.svg.setAttribute("data-svgchart-type","row");this.ruler.axis="x";this.setMargins(2,2,3,15)}Row.prototype._setItemAnchorSize=function(){return this.item_anchor_size=this.drawable_height/this.data.labels.length};Row.prototype.calcItemW=function(value){var w;w=Math.abs(this.ruler.zero-Maths.rangeToPercent(value,this.ruler.min,this.ruler.max));if(w===0){return.01}else{return w}};Row.prototype.calcItemH=function(value){var h,n_datasets;n_datasets=this.data.dataset.length;h=(this.item_anchor_size-this.bars_padding)/n_datasets/this.drawable_height;if(h===0){return.01}else{return h}};Row.prototype.calcItemX=function(index,value,width){if(value<0){return this.ruler.zero-width}else{return this.ruler.zero}};Row.prototype.calcItemY=function(index,value,height,index2){var deltaX;deltaX=(this.item_anchor_size-this.bars_padding)/this.data.dataset.length*index2;return(this.item_anchor_size*index+deltaX+this.bars_padding*.5)/this.drawable_height};Row.prototype._appendAnimation=function(el){el.append(new UI.Element("animate",{attributeType:"XML",attributeName:"width",begin:"0s",dur:ANIMATION_DURATION,fill:"freeze",from:"0",to:el.attr("width")}));if(parseFloat(el.attr("x"))<this.ruler.coords.zero.x1){return el.append(new UI.Element("animate",{attributeType:"XML",attributeName:"x",begin:"0s",dur:ANIMATION_DURATION,fill:"freeze",from:""+this.ruler.coords.zero.x1+"%",to:el.attr("x")}))}};return Row}(Base.Linear)}).call(this);